import{p as E,g as T,F as h}from"./photos-DRaw9gft.js";let m,s,c,p;const l=document.querySelector(".preview");let a,n,S=0;function b(){const t=document.createElement("div");t.className="photo-switcher",Object.entries(E).forEach(([e,o])=>{const i=document.createElement("button");i.className="photo-switcher-btn",i.dataset.photoKey=e;const r=document.createElement("img");r.src=o.filename,r.alt=e;const d=document.createElement("span");d.textContent=e,i.appendChild(r),i.appendChild(d),i.addEventListener("click",()=>{v(o),document.querySelectorAll(".photo-switcher-btn").forEach(u=>{u.classList.remove("active")}),i.classList.add("active")}),t.appendChild(i)}),document.body.appendChild(t)}function x(){a&&document.body.removeChild(a),a=document.createElement("div"),a.className="video-container",n=document.createElement("video"),n.src=`./outputs/${m}/${m}.mp4`,n.preload="auto",n.muted=!0,a.appendChild(n),document.body.insertBefore(a,l),n.addEventListener("loadedmetadata",()=>{console.log("Video loaded, duration:",n.duration,"frames:",c*s)})}function v(t){const e=T({X_STEPS:t.X_STEPS,Y_STEPS:t.Y_STEPS,PREFIX:t.PREFIX});m=e.PREFIX,s=e.Y_STEPS,c=e.X_STEPS,p=e.steps,console.log("Loading photo:",p,m,s,c),l.style.setProperty("--x-steps",c.toString()),l.style.setProperty("--y-steps",s.toString()),l.innerHTML="",x()}function y(t){const e=performance.now();if(e-S<1e3/h)return;S=e;const o=a.getBoundingClientRect(),i=o.left+o.width/2,r=o.top+o.height/2,d=t.clientX-i,u=t.clientY-r,f=o.width/2,P=o.height/2,X=Math.max(-1,Math.min(1,d/f)),g=Math.max(-1,Math.min(1,u/P)),w=Math.round((X+1)/2*(c-1)),C=(Math.round((g+1)/2*(s-1))*c+w)/h;n&&n.readyState>=2&&(n.currentTime=C)}function Y(){var e;b();const t=Object.values(E)[0];v(t),(e=document.querySelector(".photo-switcher-btn"))==null||e.classList.add("active"),document.addEventListener("pointermove",y)}Y();
