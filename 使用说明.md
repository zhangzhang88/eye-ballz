# Eyeballz 使用说明

## 🎯 项目介绍

Eyeballz 可以让照片中的人物视线跟随你的鼠标移动,创造出互动的视觉效果。

## 📋 前置要求

已完成 ✅:
- ✅ Node.js v24.2.0
- ✅ pnpm 9.10.0
- ✅ FFmpeg 7.1.1
- ✅ 项目依赖已安装
- ✅ .env 文件已创建

⚠️ 待完成:
- 在 `.env` 文件中填写你的 Replicate API Token

## 🚀 快速开始(两种方式)

### 方式一: 使用上传界面(推荐)

这是最简单的方式,通过网页界面上传照片并自动生成:

```bash
# 1. 启动上传服务器
pnpm run upload

# 2. 在浏览器打开
# http://localhost:3000/upload.html

# 3. 上传你的照片
# - 点击或拖拽上传正面人脸照片
# - 设置网格大小(建议先用 3×3 测试)
# - 点击"开始生成"按钮
# - 等待生成完成(3×3 约 1-2 分钟)

# 4. 生成完成后,启动预览服务器
pnpm run preview

# 5. 查看效果
# - 2D 预览: http://localhost:6767/preview.html
# - 3D 预览: http://localhost:6767/viewer-3d.html
```

### 方式二: 手动命令行方式

如果你更喜欢命令行操作:

```bash
# 1. 准备照片
# 创建 photos 目录并放入照片
mkdir photos
# 将你的照片复制到 photos/ 文件夹

# 2. 修改配置
# 编辑 constants.ts 设置:
# - X_STEPS 和 Y_STEPS (网格大小)
# - PREFIX (输出文件夹名称)

# 3. 修改 generate.ts
# 更新 activePhoto 指向你的照片路径

# 4. 生成图像和视频
pnpm run generate

# 5. 预览结果
pnpm run preview
# 访问 http://localhost:6767/preview.html
```

## ⚙️ 参数说明

### 网格大小(X_STEPS × Y_STEPS)

决定生成多少张不同角度的图片:

| 配置 | 图片数量 | 预计费用 | 效果 | 推荐场景 |
|------|----------|----------|------|----------|
| 3×3  | 9 张     | ~$0.009  | 基础流畅 | 快速测试 |
| 5×5  | 25 张    | ~$0.025  | 较为流畅 | 日常使用 |
| 10×10| 100 张   | ~$0.10   | 很流畅   | 高质量展示 |
| 25×25| 625 张   | ~$0.61   | 非常流畅 | 专业展示 |

### 其他参数

- **ROTATE_BOUND**: 头部旋转角度范围(度)
- **PUPIL_BOUND**: 瞳孔移动范围
- **FPS**: 视频帧率(默认 60)

## 📁 文件结构

生成后的文件结构:

```
项目根目录/
├── photos/              # 源照片
│   └── my-photo.jpg
├── outputs/             # 生成的结果
│   └── my-photo/
│       ├── my-photo_000_0_0_yaw-20_pitch-20_px-15_py15.webp
│       ├── my-photo_001_1_0_yaw0_pitch-20_px0_py15.webp
│       ├── ...          # 其他图片
│       └── my-photo.mp4 # 最终视频
├── upload.html          # 上传界面
└── .env                 # API 配置
```

## 💡 使用技巧

1. **照片要求**:
   - 正面人脸
   - 清晰度高
   - 光线均匀
   - 背景简洁更佳

2. **首次使用建议**:
   - 先用 3×3 网格测试
   - 确认效果满意后再用更大的网格

3. **费用控制**:
   - 每张图片约 $0.00098
   - 网格大小 = X_STEPS × Y_STEPS
   - 总费用 = 图片数量 × $0.00098

4. **预览模式**:
   - 2D 模式: 经典视线跟随效果
   - 3D 模式: 带深度效果(需先用 `pnpm run depth` 生成深度图)

## 🎨 效果展示

生成后,在预览页面:
- 移动鼠标,人物眼睛会跟随鼠标移动
- 鼠标在左边 → 人物看向左边
- 鼠标在右边 → 人物看向右边
- 鼠标在上方 → 人物看向上方
- 鼠标在下方 → 人物看向下方

## ❓ 常见问题

**Q: 生成需要多久?**
A: 取决于网格大小。3×3 约 1-2 分钟,10×10 约 5-10 分钟。

**Q: 可以用多张照片吗?**
A: 可以!每次上传新照片都会生成独立的结果文件夹。

**Q: 如何切换不同照片的效果?**
A: 在预览页面有照片切换器,可以快速切换查看不同照片的效果。

**Q: API Token 从哪里获取?**
A: 访问 https://replicate.com 注册账号并获取 API token。

## 📞 获取帮助

如果遇到问题:
1. 检查 .env 文件是否正确配置
2. 确认照片格式正确(JPG/PNG/WEBP)
3. 查看终端输出的错误信息
4. 确保网络连接正常(需要访问 Replicate API)

---

**祝你使用愉快!** 👀✨
